//===== rAthena Script =======================================
//= Curandeira
//===== By: ==================================================
//= Vini
//===== Current Version: =====================================
//= 1.0
//===== Compatible With: =====================================
//= rAthena Project
//===== Description: =========================================
//= Curandeira para jogador grátis e vip
//===== Additional Comments: =================================
//= 1.0 Inicio do script.
//============================================================

-	script	Healer	-1,{

	// Definir os valores de cura para jogador Free e VIP
	set .@zenyCost, 3000;

	// Obter o nível base do jogador
	set .@baseLevel, BaseLevel;

	// Verificar se o jogador é VIP
	if (vip_status(1)) {
    	// Seção de pagamento para jogadores VIP com nível base acima de 50
    	if (.@baseLevel >= 50) {
        	mes "Como jogador VIP, você terá um desconto de ^FF000050%^000000 para os buffs.";
        	mes "O valor total será de ^00FF00" + (.@zenyCost/2) + "^000000 zeny.";
        	next;
        	mes "Deseja usufruir dos meus serviços ?";
        	if (select("Sim", "Não") == 1) {
            	if (Zeny < .@zenyCost/2) {
                	mes "Você não tem zeny suficiente para usar o serviço.";
                	close;
            	} else {
                	set Zeny, Zeny - (.@zenyCost/2);
                	dispbottom "Você pagou " + (.@zenyCost/2) + " zeny pelo serviço de cura e buff VIP.";
                	goto checkOkVIP;
            	}
        	} else {
            	close;
       		}
    	} else {
        	// Buffs for VIP players with base level below 50
        	specialeffect2 EF_INCAGILITY;
        	sc_start SC_INCREASEAGI, 300000, 8;
        	specialeffect2 EF_BLESSING;
        	sc_start SC_BLESSING, 300000, 8;
        	specialeffect2 EF_IMPOSITIO;
        	sc_start SC_IMPOSITIO, 60000, 3;
        	specialeffect2 EF_MAGNIFICAT;
        	sc_start SC_MAGNIFICAT, 60000, 5;
        	percentheal 100, 100;

        	// Verifica o cooldown para o buff de EXP (SC_EXPBOOST)
        	set .@current_time, gettimetick(2);
        	set .@last_expbuff_time, getd("$vip_expbuff_time");
        	set .@exp_buff_cooldown, 4 * 60 * 60; // 4 horas em segundos (ajustável)

        	if (.@current_time - .@last_expbuff_time < .@exp_buff_cooldown) {
            	dispbottom "Você já recebeu o buff de experiência, tente novamente mais tarde.";
        	} else {
            	// Atualiza a hora do último bônus de EXP para a hora atual.
            	setd("$vip_expbuff_time", .@current_time);
            	// Buff de 5% de experiência de base e job
            	sc_start SC_EXPBOOST, 1800000, 5;
            	dispbottom "Você recebeu o buff de experiência VIP!";
        	}
        	end;
   		}
	} else {
    	// Jogadores Free
    	if (.@baseLevel >= 50) {
			// Seção de pagamento para jogadores free com nível base acima de 50
			if (Zeny < .@zenyCost) {
    			mes "Você não tem zeny suficiente para usar o serviço.";
    			close;
			} else {
    			mes "A partir do nível 50 de base eu estarei cobrando ^00FF00" + .@zenyCost + "^000000 zeny pelo serviço de cura e buff.";
    			next;
    			mes "Você deseja usufruir dos meus serviços ?";
    			if (select("Sim", "Não") == 1) {
        			set Zeny, Zeny - .@zenyCost;
        			dispbottom "Você pagou " + .@zenyCost + " zeny pelo serviço de cura e buff.";
        			goto checkOkFree;
    			}
			}
    	} else {
			specialeffect2 EF_INCAGILITY;
			sc_start SC_INCREASEAGI, 300000, 5;
			specialeffect2 EF_BLESSING;
			sc_start SC_BLESSING, 300000, 5;
			percentheal 100, 100;
			end;
		}
	}
	close;

	checkOkFree:
	// Buffs para jogadores grátis
	specialeffect2 EF_INCAGILITY;
	sc_start SC_INCREASEAGI, 300000, 5; // Agilidade nível 5 por 5 minutos
	specialeffect2 EF_BLESSING;
	sc_start SC_BLESSING, 300000, 5; // Benção nível 5 por 5 minutos
	percentheal 100, 100; // Cura HP e SP totalmente
	end;

	checkOkVIP:
	// Buffs para jogadores VIP
	specialeffect2 EF_INCAGILITY;
	sc_start SC_INCREASEAGI, 300000, 8; // Agilidade nível 8 por 5 minutos
	specialeffect2 EF_BLESSING;
	sc_start SC_BLESSING, 300000, 8; // Benção nível 8 por 5 minutos
	specialeffect2 EF_IMPOSITIO;
	sc_start SC_IMPOSITIO, 60000, 3; // Impositio Manus nível 3 por 1 minuto
	specialeffect2 EF_MAGNIFICAT;
	sc_start SC_MAGNIFICAT, 60000, 5; // Magnificat nível 5 por 1 minuto
	percentheal 100, 100; // Cura HP e SP totalmente

	// Verifica o cooldown para o buff de EXP (SC_EXPBOOST)
	set .@current_time, gettimetick(2);
	set .@last_expbuff_time, getd("$vip_expbuff_time");
	set .@exp_buff_cooldown, 4 * 60 * 60; // 4 horas em segundos (ajustável)

	if (.@current_time - .@last_expbuff_time < .@exp_buff_cooldown) {
		dispbottom "Você já recebeu o buff de experiência, tente novamente mais tarde.";
	} else {
    	// Atualiza a hora do último bônus de EXP para a hora atual.
    	setd("$vip_expbuff_time", .@current_time);
    	// Buff de 5% de experiência de base e job
    	sc_start SC_EXPBOOST, 1800000, 5;
    	dispbottom "Você recebeu o buff de experiência VIP!";
	}
	end;
}

// Duplicates
//============================================================
alberta,25,240,6	duplicate(Healer)	Healer#alb	909
aldebaran,135,118,6	duplicate(Healer)	Healer#alde	909
amatsu,200,79,4	duplicate(Healer)	Healer#ama	909
ayothaya,207,169,6	duplicate(Healer)	Healer#ayo	909
comodo,184,158,6	duplicate(Healer)	Healer#com	909
einbech,57,36,6	duplicate(Healer)	Healer#einbe	909
einbroch,57,202,6	duplicate(Healer)	Healer#einbr	909
geffen,115,72,6	duplicate(Healer)	Healer#gef	909
gonryun,156,122,6	duplicate(Healer)	Healer#gon	909
hugel,89,150,6	duplicate(Healer)	Healer#hug	909
izlude,121,150,6	duplicate(Healer)	Healer#izl	909	//Pre-RE: (125,118)
jawaii,250,139,4	duplicate(Healer)	Healer#jaw	909
lighthalzen,152,100,6	duplicate(Healer)	Healer#lhz	909
louyang,226,103,4	duplicate(Healer)	Healer#lou	909
manuk,272,144,6	duplicate(Healer)	Healer#man	909
mid_camp,203,289,6	duplicate(Healer)	Healer#mid	909
moc_ruins,72,164,4	duplicate(Healer)	Healer#moc	909
morocc,153,97,6	duplicate(Healer)	Healer#mor	909
moscovia,220,191,4	duplicate(Healer)	Healer#mos	909
niflheim,212,182,5	duplicate(Healer)	Healer#nif	909
payon,179,106,4	duplicate(Healer)	Healer#pay	909
prontera,162,193,4	duplicate(Healer)	Healer#prt	909
rachel,125,116,6	duplicate(Healer)	Healer#rac	909
splendide,201,153,4	duplicate(Healer)	Healer#spl	909
thor_camp,249,74,4	duplicate(Healer)	Healer#thor	909
umbala,105,148,3	duplicate(Healer)	Healer#umb	909
veins,217,121,4	duplicate(Healer)	Healer#ve	909
xmas,143,136,4	duplicate(Healer)	Healer#xmas	909
yuno,164,45,4	duplicate(Healer)	Healer#yuno	909

// Duplicates (Renewal)
//============================================================
brasilis,194,221,6	duplicate(Healer)	Healer#bra	909
dewata,195,187,4	duplicate(Healer)	Healer#dew	909
dicastes01,201,194,4	duplicate(Healer)	Healer#dic	909
ecl_in01,45,60,4	duplicate(Healer)	Healer#ecl	909
malangdo,132,114,6	duplicate(Healer)	Healer#mal	909
malaya,227,204,6	duplicate(Healer)	Healer#ma	909
mora,55,152,4	duplicate(Healer)	Healer#mora	909

// Duplicates (Custom)
//============================================================
trinity,106,97,3	duplicate(Healer)	Healer#trinity	612